<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于webpack4+和react16+从零开始搭建脚手架 | 刘鹏的个人博客</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.17f32d1e.css" as="style"><link rel="preload" href="/assets/js/app.ffc5e9c6.js" as="script"><link rel="preload" href="/assets/js/2.7518f3f8.js" as="script"><link rel="preload" href="/assets/js/18.f2f28fe1.js" as="script"><link rel="prefetch" href="/assets/js/10.9ee11b49.js"><link rel="prefetch" href="/assets/js/11.ec84c1c1.js"><link rel="prefetch" href="/assets/js/12.628f9a19.js"><link rel="prefetch" href="/assets/js/13.81761bc8.js"><link rel="prefetch" href="/assets/js/14.b337e0f5.js"><link rel="prefetch" href="/assets/js/15.a5f92e79.js"><link rel="prefetch" href="/assets/js/16.d4d8517f.js"><link rel="prefetch" href="/assets/js/17.b3b148a7.js"><link rel="prefetch" href="/assets/js/19.838a0392.js"><link rel="prefetch" href="/assets/js/20.a72c6dc5.js"><link rel="prefetch" href="/assets/js/21.56f4e937.js"><link rel="prefetch" href="/assets/js/22.c8ba6755.js"><link rel="prefetch" href="/assets/js/23.05c42f3b.js"><link rel="prefetch" href="/assets/js/24.c3af3a03.js"><link rel="prefetch" href="/assets/js/25.65f2a5c0.js"><link rel="prefetch" href="/assets/js/3.9f6d9071.js"><link rel="prefetch" href="/assets/js/4.3ff2fe10.js"><link rel="prefetch" href="/assets/js/5.9d8433d7.js"><link rel="prefetch" href="/assets/js/6.d76490f0.js"><link rel="prefetch" href="/assets/js/7.ec663ebe.js"><link rel="prefetch" href="/assets/js/8.335f0076.js"><link rel="prefetch" href="/assets/js/9.cde84ad6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.17f32d1e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">刘鹏的个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人随笔" class="dropdown-title"><span class="title">个人随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/word/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/word/js/" class="nav-link router-link-active">js</a></li><li class="dropdown-item"><!----> <a href="/word/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/word/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/word/windows/" class="nav-link">windows</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="参考文档" class="dropdown-title"><span class="title">参考文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/geping/" class="nav-link">葛平</a></li><li class="dropdown-item"><!----> <a href="/yuanshou/" class="nav-link">元首</a></li></ul></div></div><div class="nav-item"><a href="http://hujiashi.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参考文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人随笔" class="dropdown-title"><span class="title">个人随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/word/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/word/js/" class="nav-link router-link-active">js</a></li><li class="dropdown-item"><!----> <a href="/word/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/word/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/word/windows/" class="nav-link">windows</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="参考文档" class="dropdown-title"><span class="title">参考文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/geping/" class="nav-link">葛平</a></li><li class="dropdown-item"><!----> <a href="/yuanshou/" class="nav-link">元首</a></li></ul></div></div><div class="nav-item"><a href="http://hujiashi.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参考文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/word/" class="sidebar-link">这是文档列表页</a></li><li><section class="sidebar-group depth-0"><a href="/word/css" class="sidebar-heading clickable"><span>css</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/word/css/阅读css世界笔记.html" class="sidebar-link">阅读css世界笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/word/html" class="sidebar-heading clickable"><span>html</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/word/html/document属性和方法总结.html" class="sidebar-link">document属性和方法总结</a></li><li><a href="/word/html/web前端常用名词.html" class="sidebar-link">web前端常用名词</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/word/js" class="sidebar-heading clickable router-link-active open"><span>javascript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/word/js/基于webpack4+和react16+从零开始搭建脚手架.html" class="active sidebar-link">基于webpack4+和react16+从零开始搭建脚手架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/word/js/基于webpack4+和react16+从零开始搭建脚手架.html#一：初始化项目" class="sidebar-link">一：初始化项目</a></li><li class="sidebar-sub-header"><a href="/word/js/基于webpack4+和react16+从零开始搭建脚手架.html#二：安装node，npm" class="sidebar-link">二：安装node，npm</a></li><li class="sidebar-sub-header"><a href="/word/js/基于webpack4+和react16+从零开始搭建脚手架.html#三：安装webpack和webpack-cli" class="sidebar-link">三：安装webpack和webpack-cli</a></li><li class="sidebar-sub-header"><a href="/word/js/基于webpack4+和react16+从零开始搭建脚手架.html#四：创建项目文件" class="sidebar-link">四：创建项目文件</a></li><li class="sidebar-sub-header"><a href="/word/js/基于webpack4+和react16+从零开始搭建脚手架.html#五：安装react和react-dom" class="sidebar-link">五：安装react和react-dom</a></li></ul></li><li><a href="/word/js/静态文件压缩工具gulp.html" class="sidebar-link">静态文件压缩工具gulp</a></li><li><a href="/word/js/数组的33种基本方法.html" class="sidebar-link">数组的33种基本方法</a></li><li><a href="/word/js/javascript 数据类型.html" class="sidebar-link">javascript 数据类型</a></li><li><a href="/word/js/javascript script属性和注意事项.html" class="sidebar-link">javascript script属性和注意事项</a></li><li><a href="/word/js/javascript解决跨越（同源策略）的三种方案.html" class="sidebar-link">javascript解决跨越（同源策略）的三种方案</a></li><li><a href="/word/js/json-server使用.html" class="sidebar-link">json-server使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/word/linux" class="sidebar-heading clickable"><span>linux</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/word/linux/常用linux命令.html" class="sidebar-link">常用linux命令</a></li><li><a href="/word/linux/linux下安装mysql.html" class="sidebar-link">linux下安装mysql</a></li><li><a href="/word/linux/linux下搭建nginx并配置网站.html" class="sidebar-link">linux下搭建nginx并配置网站</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/word/windows" class="sidebar-heading clickable"><span>windows</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/word/windows/node版本管理器nvm在windows下安装.html" class="sidebar-link">/word/windows/node版本管理器nvm在windows下安装.html</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="基于webpack4-和react16-从零开始搭建脚手架"><a href="#基于webpack4-和react16-从零开始搭建脚手架" class="header-anchor">#</a> 基于webpack4+和react16+从零开始搭建脚手架</h1> <h2 id="一：初始化项目"><a href="#一：初始化项目" class="header-anchor">#</a> 一：初始化项目</h2> <pre><code>  mkdir webpack-react 创建项目目录
  cd  webpack-react 转到项目目录
  npm init -y 初始化项目，并全部确定
</code></pre> <h2 id="二：安装node，npm"><a href="#二：安装node，npm" class="header-anchor">#</a> 二：安装node，npm</h2> <pre><code>windows 去node.js官网下载安装包直接安装
linux和mac mac和Linux直接命令行安装nvm install v10.15.3
检查是否安装成功node -v, npm -v
</code></pre> <h2 id="三：安装webpack和webpack-cli"><a href="#三：安装webpack和webpack-cli" class="header-anchor">#</a> 三：安装webpack和webpack-cli</h2> <pre><code>npm install --save-dev webpack@4.15.1 webpack-cli 
</code></pre> <h2 id="四：创建项目文件"><a href="#四：创建项目文件" class="header-anchor">#</a> 四：创建项目文件</h2> <p>新建目录src，新建index.html和index.js</p> <p><strong>index.js</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var element =document.getElementById('root');
element.innerHTML = 'hello, world!';
</code></pre></div><p><strong>index.html</strong></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
  &lt;title&gt;从零搭建react项目&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;script src=&quot;../dist/vender.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre></div><p>新建目录build，新建文件webpack.config.js</p> <p><strong>webpack.config.js</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path');

module.exports = {
  entry: './src/index.js',  //打包入口文件
  output: {
    filename: 'vender.js', //打包生成的文件
    path: path.resolve(__dirname, '../dist')  //打包生成文件的存放目录
  }
};
</code></pre></div><p>现在的目录文件看起来是这样</p> <div class="language- extra-class"><pre class="language-text"><code>build
   --webpack.config.js  webpack默认配置文件
src
   --index.html 静态文件
   --index.js 打包入口文件
node_modules node 依赖包目录  
package-lock.json webpack基本插件和依赖的版本号和信息
package.json 项目目录的详细描述
</code></pre></div><p>接下去我们要通过执行webpack命令，来编译我们的代码，生成vender.js。</p> <div class="language- extra-class"><pre class="language-text"><code>webpack --config build/webpack.config.js
</code></pre></div><p>编译完成后，刷新根目录，可以看到已经生成dist文件夹和vender.js文件。
用浏览器打开html文件，你会看到hello word。我们成功通过webpack编译了js文件，并且没有出现问题。</p> <p>webpack --config build/webpack.config.js命令，我们可以通过npm scripts管理起来。
在package.json文件，我们为scripts属性配置一个build命令，其值为：webpack --config build/webpack.config.js，以下是scripts的相关代码：</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
    &quot;build&quot;: &quot;webpack --config build/webpack.config.js&quot;
  }
</code></pre></div><p>然后在命令行中运行npm run build
生成以下机构目录</p> <p><img src="https://user-gold-cdn.xitu.io/2019/6/24/16b8807f988aea75?w=196&amp;h=259&amp;f=png&amp;s=10632" alt=""></p> <h2 id="五：安装react和react-dom"><a href="#五：安装react和react-dom" class="header-anchor">#</a> 五：安装react和react-dom</h2> <p>在终端输入以下命令</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev react react-dom
</code></pre></div><p>安装成功后，我们在项目使用react，我们直接修改src目录下的index.js的代码，我们用react来插入这句hello world！</p> <div class="language- extra-class"><pre class="language-text"><code>import React from &quot;react&quot;;
import ReactDom from &quot;react-dom&quot;;

ReactDom.render(
    &lt;h1&gt;hello,word!&lt;/h1&gt;,
    document.getElementById('root')
);
</code></pre></div><p>好了，我们再编译试试看。</p> <div class="language- extra-class"><pre class="language-text"><code>npm run build
</code></pre></div><p>失败了？对不对！首先，我告诉你这段代码没有任何问题为什么会失败？因为webpack只识别JavaScript文件，而且只能编译es5版本的JavaScript语法。实际上，我们使用ES2015，以及jsx的语法糖，webpack它根本不认识啊。怎么办？webpack 可以使用 loader 来预处理文件。它不仅仅可以处理JavaScript本身，还允许你打包任何的静态资源。
其中，babel-loader，就是这样一个预处理插件，它加载 ES2015+ 代码，然后使用 Babel 转译为 ES5。我们来了解下如何在webpack配置babel-loader。</p> <p>首先安装babel相关的模块：</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev babel-loader @babel/preset-react @babel/preset-env @babel/core
</code></pre></div><p>除了babel-loader，我们还安装了好多的包，其中@babel/core是babel的核心模块，@babel/preset-env是转译ES2015+的语法，@babel/preset-react是转译react的JSX以及FLOW。</p> <p>第二步，你需要在根目录建立一个.babelrc的文件，配置相关的presets：</p> <div class="language- extra-class"><pre class="language-text"><code>{
      &quot;presets&quot;: [
        [
          &quot;@babel/preset-env&quot;,
          {
            &quot;targets&quot;: {
              &quot;browsers&quot;: [
                &quot;&gt; 1%&quot;,
                &quot;last 5 versions&quot;,
                &quot;ie &gt;= 8&quot;
              ]
            }
          }
        ],
        &quot;@babel/preset-react&quot;
      ]
    }
</code></pre></div><p>第三步，修改webpack.config.js文件。</p> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'vender.js',
    path: path.resolve(__dirname, '../dist')
  },
  module: {
      rules:[
          {
              test: /\.js?$/,
              use:&quot;babel-loader&quot;
          }
      ]
  }
};
</code></pre></div><p>在 webpack 配置中定义 loader 时，要定义在 module.rules 中。其中，test和use属性是必须的。include属性，定义了rules执行的范围。这告诉 webpack 编译器如下信息：
嘿，webpack 编译器，你在编译文件过程中，如果这个是在app目录下的js文件，在你对它打包之前，先使用 babel-loader 转换一下。</p> <p>重新执行本地编译</p> <div class="language- extra-class"><pre class="language-text"><code>npm run build
</code></pre></div><p>这次不再报错，编译成功。
好了，再次打开src目录的index.html，页面成功显示了hello world。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/word/html/web前端常用名词.html" class="prev">web前端常用名词</a></span> <span class="next"><a href="/word/js/静态文件压缩工具gulp.html">静态文件压缩工具gulp</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ffc5e9c6.js" defer></script><script src="/assets/js/2.7518f3f8.js" defer></script><script src="/assets/js/18.f2f28fe1.js" defer></script>
  </body>
</html>
